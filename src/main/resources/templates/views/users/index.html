<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head th:include="fragment/header :: headerFragment" />

<body>
<div id="wrapper">
<!-- Header -->
<div th:replace="fragment/header :: navbar_alt" > </div>



<br/>
<div id="page-wrapper">
	<div class="row">
		
		<!-- <ol class="breadcrumb">
			<li><a href="/users/index.html">Пользователи</a></li>
			<li class="active"><th:block th:text="${host.serverName}" /></li>
		</ol> -->
		
		<ol class="breadcrumb">
			<li class="active">Пользователи</li>
		</ol>
		<div class="col-lg-12">
			<a href="/users/create">Добавить</a>
		</div>
		<div class="col-lg-12">
			<h1 class="page-header">Управление пользователями</h1>
		</div>
		
		
	</div> 
 <div class="row">
 	
 	
 	<table id="userstable" class="display" cellspacing="0" width="100%" >
        <thead>
            <tr>
                <th>№ п/п</th>
                <th>ФИО</th>
                <th>Логин</th>
                <th>Роль</th>
                <th>Статус</th>
                <th>Время последнего входа</th>
                <th>Дата регистрации</th>
                <th>Дата блокировки</th>
                <th>Действия</th>
                
            </tr>
        </thead>
 
        <tfoot>
            <tr>
                <th>№ п/п</th>
                <th>ФИО</th>
                <th>Логин</th>
                <th>Роль</th>
                <th>Статус</th>
                <th>Время последнего входа</th>
                <th>Дата регистрации</th>
                <th>Дата блокировки</th>
                <th>Действия</th>
                
            </tr>
        </tfoot>
 
        <tbody>
            <tr th:each="user, iterStat : ${users}" >
                <td>№ п/п</td>
                <td th:text="${user.name}">ФИО</td>
                <td th:text="${user.login}">Логин</td>
                <td th:text="${user.role}">Роль</td>
                <td th:text="${user.status}">Статус</td>
                <td th:text="${user.lastLogin}">Время последнего входа</td>
                <td th:text="${user.signinDate}">Дата регистрации</td>
                <td th:text="${user.blockDate}">Дата блокировки</td>
                <td th:text="${user.id}">Идентификационный номер</td>
                
            </tr>
        </tbody>
    </table>
 	
 	
</div>

</div>
</div>

<div th:include="fragment/header :: scripts" > </div>

<script type="text/javascript">
	//<![CDATA[
	$(document).ready(function() {
		$(function () {
			$('[data-toggle="tooltip"]').tooltip()
		})
		
		
	    var myTable = $('#userstable').DataTable({
			"language": {
	        	"url": "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Russian.json"
	        },
	        "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "Все"]],
	        "order": [[ 1, 'asc' ]],
	        "columnDefs": [
				{
	    			"searchable": false,
	    			"orderable": false,
	    			"targets": 0
				},
	            {
		         	"targets": -1,
		         	"searchable": false,
	    			"orderable": false,
		            "data": "Действия",
		            "render": function (data, type, full, meta) {
		            	var updateField = '<a class="update" href="/users/update/'+data+'" data-toggle="tooltip" title="" data-original-title="Редактировать"> \
		     	 								<i class="glyphicon glyphicon-pencil"></i></a>';
		     	 		var deleteField = '<a class="delete" href="/users/delete/'+data+'" data-toggle="tooltip" title="" data-original-title="Удалить"> \
		         								<i class="glyphicon glyphicon-trash"></i> </a>'; 	 
			            return "<center>"+updateField+"&nbsp;&nbsp;&nbsp;"+deleteField+"</center>";
	           	}
	        }]
	    });
		
		myTable.on( 'order.dt search.dt', function () {
			myTable.column(0, {search:'applied', order:'applied'}).nodes().each( function (cell, i) {
	            cell.innerHTML = i+1;
	        } );
	    } ).draw();
		
	});
	//]]>
</script>

</body>
</html>